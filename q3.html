<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>تحلیل دقت مختصات سه‌بعدی در فتوگرامتری</title>
    <script src="./assets/tex-mml-chtml.js"></script>
    <link
      rel="stylesheet"
      href="./assets/bootstrap-5.2.3/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="./assets/style.css" />
  </head>

  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-4">
          <img
            src="./assets/ut_logo.png"
            alt="University of Tehran Logo"
            class="img-fluid"
            style="max-height: 100px; margin-bottom: 20px"
          />
        </div>
        <div class="col-4 head_name">
          <p>پاسخ سوال سوم</p>
        </div>
        <div class="col-4" style="text-align: left">
          <img
            src="./assets/fanni_logo.png"
            alt="College of Engineering Logo"
            class="img-fluid"
            style="max-height: 100px; margin-top: 0px; transform: scale(1.2)"
          />
        </div>
      </div>
      

      <h2>گام ۱: درک مسئله</h2>
  <p>
    تصویر، مسئله‌ای از فتوگرامتری مربوط به تصحیح تصویر را نمایش می‌دهد. هدف، محاسبه ماتریس هموگرافی \( H \) است که نقاط را از تصویر منبع (نمای تحریف‌شده‌ی یک ساختمان) به تصویر مقصد (نمای تصحیح‌شده‌ی نما) نگاشت می‌کند.
  </p>
  <p><strong>نقاط منبع (مختصات پیکسلی در تصویر منبع):</strong></p>
  <p>
    \[
    p_1 = \begin{bmatrix} x_1 & x_2 & x_3 & x_4 \\ y_1 & y_2 & y_3 & y_4 \end{bmatrix} =
    \begin{bmatrix}
    66.11 & 70.55 & 806.11 & 813.89 \\
    658.33 & 298.33 & 150.56 & 689.44
    \end{bmatrix}
    \]
  </p>
  <p><strong>نقاط مقصد (مختصات پیکسلی در تصویر تصحیح‌شده):</strong></p>
  <p>
    \[
    \begin{bmatrix}
    0 & 0 & 1000 & 1000 \\
    0 & 1000 & 1000 & 0
    \end{bmatrix}
    \]
  </p>
  <p>وظیفه: محاسبه ماتریس هموگرافی \( H \) با استفاده از:</p>
  <ul>
    <li>روش مستقیم خطی همگن (DLT)</li>
    <li>روش غیر همگن DLT با فرض \( h_{33} = 1 \)</li>
  </ul>

  <h2>گام ۲: پیش‌زمینه نظری</h2>
  <div class="section">
    <h3>روش همگن و ناهمگن در برآورد پارامترها</h3>
    <p>
      در فرآیند برازش منحنی و مدل‌سازی داده‌های ژئودتیکی، از دو رویکرد کلی برای وزن‌دهی به مشاهدات استفاده می‌شود: <strong>روش همگن</strong> و <strong>روش ناهمگن</strong>.
    </p>
  
    <h4>روش همگن (Homogeneous)</h4>
    <p>
      در این روش، فرض می‌شود که تمامی مشاهدات دارای دقت یکسانی هستند. به عبارت دیگر، ماتریس کوواریانس مشاهدات <span style="font-family:monospace;">Q<sub>y</sub></span> به صورت یک ماتریس قطری با مقادیر یکسان (مثلاً σ²) در قطر در نظر گرفته می‌شود. این روش زمانی استفاده می‌شود که اطلاعات دقیق‌تری از دقت مشاهدات در دست نباشد یا اختلاف بین آن‌ها ناچیز باشد.
    </p>
  
    <h4>روش ناهمگن (Heterogeneous)</h4>
    <p>
      در این روش، دقت مشاهدات متفاوت فرض می‌شود و برای هر مشاهده، یک وزن مجزا تعریف می‌شود. در نتیجه، ماتریس <span style="font-family:monospace;">Q<sub>y</sub></span> دارای عناصر قطری متفاوت است که هرکدام نشان‌دهنده واریانس یک مشاهده خاص هستند. این روش دقت برآورد پارامترها را افزایش می‌دهد، به‌ویژه در حالتی که برخی مشاهدات از دقت بالاتری نسبت به سایرین برخوردارند.
    </p>
  
    <p>
      در پروژه حاضر، هر دو رویکرد مورد استفاده قرار گرفته‌اند تا تاثیر انتخاب مدل وزنی بر نتایج نهایی برآورد پارامترها بررسی شود.
    </p>
  </div>
  
  <p>
    هموگرافی، یک ماتریس ۳×۳ است که نقاط را از یک صفحه به صفحه‌ای دیگر در فضای تصویری نگاشت می‌کند.
    برای نقطه‌ای در تصویر منبع \( (x, y) \) و نقطه‌ی متناظر آن در تصویر مقصد \( (x', y') \)، رابطه به صورت زیر است:
  </p>
  <p>
    \[
    \begin{bmatrix} x' \\ y' \\ w' \end{bmatrix} = H \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}, \quad
    H = \begin{bmatrix}
    h_{11} & h_{12} & h_{13} \\
    h_{21} & h_{22} & h_{23} \\
    h_{31} & h_{32} & h_{33}
    \end{bmatrix}
    \]
  </p>
  <p>
    مختصات همگن به مختصات دکارتی با نرمال‌سازی تبدیل می‌شوند:
    \[
    x' = \frac{x'}{w'} , \quad y' = \frac{y'}{w'} , \quad  w' = h_{31}x + h_{32}y + h_{33}
    \]
  </p>
  <p>
    از آنجا که هموگرافی تا یک فاکتور مقیاس تعریف می‌شود، ۸ درجه آزادی دارد و حداقل به ۴ تطابق نقطه نیاز دارد.
  </p>

  <h3>روش همگن DLT</h3>
  <p>
    برای هر جفت نقطه \( (x_i, y_i) \rightarrow (x'_i, y'_i) \)، دو معادله با استفاده از ضرب خارجی ایجاد می‌شود:
  </p>
  <p>
    \[
    \begin{bmatrix} x'_i \\ y'_i \\ 1 \end{bmatrix} \times H \begin{bmatrix} x_i \\ y_i \\ 1 \end{bmatrix} = 0
    \]
  </p>
  <p>که منجر به ساخت ماتریس ۸×۹ \( A \) می‌شود. پاسخ، بردار ویژه متناظر با کوچک‌ترین مقدار ویژه از تجزیه SVD خواهد بود.</p>

  <h3>روش غیر همگن DLT</h3>
  <p>
    با فرض \( h_{33} = 1 \)، دو معادله زیر برای هر نقطه حاصل می‌شود:
    \[
    x'_i(h_{31}x_i + h_{32}y_i + 1) = h_{11}x_i + h_{12}y_i + h_{13} \\
    y'_i(h_{31}x_i + h_{32}y_i + 1) = h_{21}x_i + h_{22}y_i + h_{23}
    \]
  </p>
  <p>
    با مرتب‌سازی این معادلات، ماتریس ۸×۸ و بردار \( b \) ساخته می‌شود. حل با کمترین مربعات انجام شده و ماتریس هموگرافی \( H \) به صورت زیر ساخته می‌شود:
    \[
    H = \begin{bmatrix}
    h_{11} & h_{12} & h_{13} \\
    h_{21} & h_{22} & h_{23} \\
    h_{31} & h_{32} & 1
    \end{bmatrix}
    \]
  </p>

  <h2>گام ۳: بررسی کد</h2>
  <ul>
    <li>نقاط ورودی به درستی تنظیم شده‌اند.</li>
    <li>تابع DLT همگن از SVD برای یافتن فضای پوچ استفاده می‌کند که درست است.</li>
    <li>در روش غیر همگن، نرمال‌سازی نهایی غیر ضروری است زیرا \( h_{33} = 1 \) فرض شده است.</li>
    <li>کد فاقد بررسی دقت ماتریس با نگاشت نقاط منبع به مقصد است.</li>
  </ul>

  <h2>گام ۴: حل مسئله</h2>
  <p>
    هدف این است که هر دو روش، نتایج سازگار ارائه دهند.
    باید از نگاشت \( H \) برای نقاط منبع استفاده کرد و بررسی کرد که آیا به درستی به نقاط مقصد نگاشت می‌شوند یا نه.
  </p>

  </body>
</html>
